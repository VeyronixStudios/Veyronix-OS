import disnake
from disnake.ext import commands
import os
from dotenv import load_dotenv

# –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç–æ–∫–µ–Ω–∏ –∑ .env
load_dotenv()
TOKEN = os.getenv("DISCORD_TOKEN")

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ–Ω—Ç—ñ–≤ (–ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É)
intents = disnake.Intents.default()
intents.message_content = True  # –©–æ–± –±–æ—Ç –±–∞—á–∏–≤ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
intents.members = True          # –î–ª—è –º–∞–π–±—É—Ç–Ω—å–æ—ó —Å–∏—Å—Ç–µ–º–∏ —Ä—ñ–≤–Ω—ñ–≤

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞
bot = commands.Bot(command_prefix="!", intents=intents)

@bot.event
async def on_ready():
    print(f"üõ∞Ô∏è Veyronix OS –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∞ —è–∫: {bot.user}")
    print("üõ†Ô∏è –†–µ–∂–∏–º —Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è: –£–í–Ü–ú–ö–ù–ï–ù–û")
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞, —â–æ–± –≤—Å—ñ –±–∞—á–∏–ª–∏ –∞–ø–≥—Ä–µ–π–¥ –≤—ñ–¥—Ä–∞–∑—É
    await bot.change_presence(activity=disnake.Game(name="Upgrade to v3.0 üõ†Ô∏è"))

# --- –¢–û–ô –°–ê–ú–ò–ô –©–ò–¢ (MAINTENANCE MODE) ---
@bot.event
async def on_message(message):
    # –Ü–≥–Ω–æ—Ä—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ —Å–∞–º–∏—Ö –±–æ—Ç—ñ–≤, —â–æ–± –Ω–µ –±—É–ª–æ –ø–µ—Ç–ª—ñ
    if message.author.bot:
        return

    # –Ø–∫—â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–∞ –∫–æ–º–∞–Ω–¥–∏ (!)
    if message.content.startswith("!"):
        # –¢–∏ –º–æ–∂–µ—à –¥–æ–¥–∞—Ç–∏ —Å–≤—ñ–π ID –≤ —Å–ø–∏—Å–æ–∫ —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è, —â–æ–± –∫–æ–º–∞–Ω–¥–∏ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –¢–Ü–õ–¨–ö–ò –¥–ª—è —Ç–µ–±–µ
        # –ù–∞–ø—Ä–∏–∫–ª–∞–¥: if message.author.id != –¢–í–Ü–ô_ID:
        await message.reply(
            "üõ∞Ô∏è **VEYRONIX OS**: –°–∏—Å—Ç–µ–º–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –µ—Ç–∞–ø—ñ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∞–ø–≥—Ä–µ–π–¥—É –¥–æ **15.02.26**. \n"
            "–ö–æ–º–∞–Ω–¥–∏ —Ç–∏–º—á–∞—Å–æ–≤–æ –æ–±–º–µ–∂–µ–Ω—ñ. –î—è–∫—É—î–º–æ –∑–∞ —Ç–µ—Ä–ø—ñ–Ω–Ω—è! üõ†Ô∏è"
        )
        return  # –ë–ª–æ–∫—É—î–º–æ –ø–æ–¥–∞–ª—å—à–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏

    # –Ø–∫—â–æ —Ü–µ –Ω–µ –∫–æ–º–∞–Ω–¥–∞, –±–æ—Ç –º–æ–∂–µ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –ª–æ–≥—ñ–≤)
    await bot.process_commands(message)

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤ —ñ–∑ –ø–∞–ø–∫–∏ cogs
for filename in os.listdir("./cogs"):
    if filename.endswith(".py"):
        try:
            bot.load_extension(f"cogs.{filename[:-3]}")
            print(f"‚úÖ –ú–æ–¥—É–ª—å {filename} –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ")
        except Exception as e:
            print(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è {filename}: {e}")

# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–∏
if __name__ == "__main__":
    bot.run(TOKEN)
